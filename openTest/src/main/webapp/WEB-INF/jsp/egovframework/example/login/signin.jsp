<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>
<style type="text/css">
	#mainSection {
		margin: 0 auto;
		padding: 0;
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
		<table id="mainSection">
			<h1>Please Signin...</h1>
			<tr>
				<td>아이디: </td>
				<td><input type="text" id="mbrId" name="mbrId"/></td>
			</tr>
			<tr>
				<td>이름: </td>
				<td><input type="text" id="mbrNm" name="mbrNm"/></td>
			</tr>
			<tr>
				<td>비밀번호: </td>
				<td><input type="password" id="passwd" name="passwd"/></td>
			</tr>
			<tr>
				<td>
					<button type="button" onclick="fn_signIn();">Signin</button>
				</td>
				<td>
					<button type="button" onclick="fn_moveBack();">move back...</button>
				</td>
			</tr>
		</table>
</body>
<script>
fn_signIn = function() { debugger;
	var mbrId = $("#mbrId").val();
	var mbrNm = $("#mbrNm").val();
	var passwd = $("#passwd").val();
	var data = {
		'mbrId' : mbrId,
		'mbrNm' : mbrNm,
		'passwd' : passwd
	};
	
	$.ajax({
		  type : 'post',
		  url : '/signin.do',
		  // data : JSON.stringify(data),
		  data : data,
		  dataType: 'json', // 응답 데이터 타입을 JSON으로 지정
		  success : function(response) {
			  // alert(response);	// {"result" : "success"} -> JSON 타입 지정 시	-> Object
			  // alert(response.result);	// undefined	-> JSON 타입 지정 시 ->	success
			  // alert(response.mbrId);
			  if(response.result === "success"){
				  // alert("회원가입을 축하합니다.");
				  if (!confirm(response.mbrId+"님 회원가입을 축하합니다. 메인화면으로 이동합니다.")) {
				        // 취소(아니오) 버튼 클릭 시 이벤트
				    } else {
				        // 확인(예) 버튼 클릭 시 이벤트
				        window.location = "/index.do";
				    }
			  }else {
				  alert("회원가입에 실패하였습니다.");
			  }
		  },
		  error : function() {
			  alert("서버 요청 중 오류가 발생하였습니다.");
		  }
	});
	
}

fn_moveBack = function() {
	window.location = "/index.do";
}
</script>
</html>